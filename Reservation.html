<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserve Your Spot | Aqaba Cooking Class & Walking Tour</title>
    <meta name="description" content="Reserve your spot for Aqaba local experiences popular Aqaba walking tour and cooking class. Secure your booking today for a hands-on Jordanian experience.">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Mobile menu overlay -->
    <div class="menu-overlay" id="menuOverlay"></div>
    <!-- Navigation Menu -->
    <nav class="navbar" role="navigation" aria-label="Main Navigation">
        <button class="hamburger" id="hamburger" aria-label="Toggle navigation">&#9776;</button>
        <div class="navbar-links" id="navbarLinks">
            <a href="index.html">Home</a>
            <a href="about.html">About Us</a>
            <div class="dropdown">
                <a href="#" class="dropbtn">Experiences</a>
                <div class="dropdown-content">
                    <a href="cookingclass.html">Cooking Class</a>
                    <a href="walkingtour.html">Walking Tour</a>
                    <a href="glassboat.html">Aqaba Glass Boat</a>
                    <a href="dinningexperience.html">Dining Experience</a>
                </div>
            </div>
            <a href="Reservation.html" class="active">Reservations</a>
            <a href="contact-Us.html">Contact</a>
            <a href="Blog.html">Blog</a>
        </div>
    </nav>

    <!-- Reservation Hero Section -->
    <div class="reservation-hero">
        <h1>Book Your Aqaba Cooking Class or Walking Tour</h1>
        <p>Experience authentic Jordanian hospitality with Aqaba local experiences family—choose a hands-on cooking class or a guided walking food tour in Aqaba.</p>
    </div>
    <!-- Reservation Section -->
    <div class="reservation-container">
        <!-- Experience 1 -->
        <div class="reservation-item">
            <img src="Experience1.webp" loading="lazy" alt="Cooking Class in Aqaba">
            <h3><a href="cookingclass.html" title="Authentic Cooking Class">Authentic Cooking Class</a></h3>
            <p>Join our family in the kitchen and learn to prepare traditional dishes with recipes passed down for generations.</p>
            <p><strong>30JD</strong></p>
             <a href="javascript:void(0);" class="button" onclick="openForm('cooking')">Book Now</a>
            <div class="card-footer">
              <a href="cookingclass.html" class="learn-more" title="Learn more about Authentic Cooking Class" aria-label="Learn more about Authentic Cooking Class">Learn more</a>
            </div>
        </div>

        <!-- Experience 2 -->
        <div class="reservation-item">
            <img src="Experience2.webp" loading="lazy" alt="Walking Tour In Aqaba">
            <h3><a href="walkingtour.html" title="Walking Tour in Aqaba">Walking Tour in Aqaba</a></h3>
            <p>Experience the Heart of Aqaba on Foot – A Guided Walking Tour Through History, Culture, and Coastal Beauty.</p>
            <p><strong>20JD</strong></p>
            <a href="javascript:void(0);" class="button" onclick="openForm('walking')">Book Walking Tour in Aqaba</a>
            <div class="card-footer">
              <a href="walkingtour.html" class="learn-more" title="Learn more about Walking Tour in Aqaba" aria-label="Learn more about Walking Tour in Aqaba">Learn more</a>
            </div>
        </div>

        <!-- Experience 3 -->
        <div class="reservation-item">
            <img src="Experience3.webp" loading="lazy" alt="Dining Local Experience">
            <h3><a href="dinningexperience.html" title="Dining Experience">Dining Experience</a></h3>
            <p>Enjoy a meal with our family, sharing stories, recipes, and delicious food in a warm, inviting atmosphere.</p>
            <p><strong>15JD</strong></p>
            <a href="javascript:void(0);" class="button" onclick="openForm('dining')">Book Now</a>
            <div class="card-footer">
              <a href="dinningexperience.html" class="learn-more" title="Learn more about Dining Experience" aria-label="Learn more about Dining Experience">Learn more</a>
            </div>
        </div>

        <!-- Experience 4: Aqaba Glass Boat -->
        <div class="reservation-item">
            <img src="glass-boat.webp" loading="lazy" alt="Aqaba Glass Boat Tour">
            <h3><a href="glassboat.html" title="Aqaba Glass Boat">Aqaba Glass Boat</a></h3>
            <p>See Aqaba’s vibrant coral reefs and marine life through a glass-bottom boat—perfect for families and all ages.</p>
            <p><strong>25JD</strong></p>
            <a href="javascript:void(0);" class="button" onclick="openForm('glassboat')">Book Now</a>
            <div class="card-footer">
              <a href="glassboat.html" class="learn-more" title="Learn more about Aqaba Glass Boat" aria-label="Learn more about Aqaba Glass Boat">Learn more</a>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading-spinner">
        <img src="loading-spinner.gif" alt="Loading...">
    </div>

    <!-- Error/Success Message Container -->
    <div id="form-message-container"></div>
    <!-- Popup Modal for Error -->
    <div id="error-popup" style="display:none;">
        <div class="popup-content">
            <span class="close-btn" onclick="closeErrorPopup()">&times;</span>
            <div id="popup-message"></div>
        </div>
    </div>

    <!-- Booking Form Section -->
    <div id="booking-form-container">
        <p>Complete your booking details below.</p>
    </div>
    <form id="reservation-form" action="https://formspree.io/f/movkdnjg" method="POST" novalidate>
      <!-- keep honeypot -->
      <input type="text" name="_gotcha" style="display:none" aria-hidden="true">
      
      <!-- Contact Info Section -->
      <h3 style="margin-top:0; color:var(--color-accent);">1. Contact Details</h3>
      <div class="form-group">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" required aria-required="true">
      </div>

      <div class="form-group">
        <label for="email">Email Address:</label>
        <input type="email" id="email" name="email" required aria-required="true">
      </div>

      <div class="form-group">
        <label for="phone">Phone Number (WhatsApp):</label>
        <input type="tel" id="phone" name="phone" required aria-required="true" pattern="^\+?[0-9\s\-()]{6,}$" title="Enter a valid phone number">
      </div>

      <!-- Experience Selection Section -->
      <h3 style="margin-top:2rem; color:var(--color-accent);">2. Select Experiences</h3>
      <p style="font-size:0.9rem; margin-bottom:1rem; color:#666;">Check the experiences you wish to book. You can select different dates and guest numbers for each.</p>

      <!-- Cooking Class -->
      <div class="experience-option-card">
        <label class="checkbox-container main-checkbox">
            <input type="checkbox" name="Book_Cooking_Class" value="Yes" class="experience-toggle" data-target="details-cooking" data-price="30">
            <span class="checkmark"></span>
            <strong>Authentic Cooking Class (30 JD/person)</strong>
        </label>
        <div id="details-cooking" class="experience-details collapsed">
            <div class="form-row">
                <div class="form-col">
                    <label>Date:</label>
                    <input type="date" name="Cooking_Class_Date" class="date-input">
                </div>
                <div class="form-col">
                    <label>Guests:</label>
                    <input type="number" name="Cooking_Class_Guests" min="1" value="2" class="guest-input">
                </div>
            </div>
        </div>
      </div>

      <!-- Walking Tour -->
      <div class="experience-option-card">
        <label class="checkbox-container main-checkbox">
            <input type="checkbox" name="Book_Walking_Tour" value="Yes" class="experience-toggle" data-target="details-walking" data-price="20">
            <span class="checkmark"></span>
            <strong>Walking Tour in Aqaba (20 JD/person)</strong>
        </label>
        <div id="details-walking" class="experience-details collapsed">
            <div class="form-row">
                <div class="form-col">
                    <label>Date:</label>
                    <input type="date" name="Walking_Tour_Date" class="date-input">
                </div>
                <div class="form-col">
                    <label>Guests:</label>
                    <input type="number" name="Walking_Tour_Guests" min="1" value="2" class="guest-input">
                </div>
            </div>
        </div>
      </div>

      <!-- Dining Experience -->
      <div class="experience-option-card">
        <label class="checkbox-container main-checkbox">
            <input type="checkbox" name="Book_Dining_Experience" value="Yes" class="experience-toggle" data-target="details-dining" data-price="15">
            <span class="checkmark"></span>
            <strong>Dining Experience (15 JD/person)</strong>
        </label>
        <div id="details-dining" class="experience-details collapsed">
            <div class="form-row">
                <div class="form-col">
                    <label>Date:</label>
                    <input type="date" name="Dining_Experience_Date" class="date-input">
                </div>
                <div class="form-col">
                    <label>Guests:</label>
                    <input type="number" name="Dining_Experience_Guests" min="1" value="2" class="guest-input">
                </div>
            </div>
        </div>
      </div>

      <!-- Glass Boat -->
      <div class="experience-option-card">
        <label class="checkbox-container main-checkbox">
            <input type="checkbox" name="Book_Glass_Boat" value="Yes" class="experience-toggle" data-target="details-glassboat" data-price="25">
            <span class="checkmark"></span>
            <strong>Aqaba Glass Boat (25 JD/hour)</strong>
        </label>
        <div id="details-glassboat" class="experience-details collapsed">
            <div class="form-row">
                <div class="form-col">
                    <label>Date:</label>
                    <input type="date" name="Glass_Boat_Date" class="date-input">
                </div>
                <div class="form-col">
                    <label>Hours/Trips:</label>
                    <input type="number" name="Glass_Boat_Hours" min="1" value="1" class="guest-input">
                </div>
            </div>
            <p style="font-size:0.85rem; margin-top:5px; color:#666;">*Price is per hour for the boat (up to 6 people).</p>
        </div>
      </div>

      <div class="form-group">
        <label for="comments">Additional Comments / Special Requests:</label>
        <textarea id="comments" name="comments" rows="3"></textarea>
      </div>

      <!-- Price Display -->
      <div id="price-display" class="form-price-display">Total Estimated Price: 0.00 JD</div>

      <!-- aria-live region for messages -->
      <div id="form-message" role="status" aria-live="polite" class="sr-only"></div>

      <div class="form-actions">
        <button id="reservation-submit" type="submit" class="button">Submit Booking Request</button>
      </div>
    </form>

    <!-- FAQ Section -->
    <section class="faq-section">
        <h2>Frequently Asked Questions</h2>
        <div class="faq-container">
            <div class="faq-item">
                <button class="faq-question" aria-expanded="false">Is transportation included? <span class="icon">+</span></button>
                <div class="faq-answer">
                    <p>Transportation is not automatically included, but we can help arrange a taxi for you if needed. Our meeting points are centrally located in Aqaba.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question" aria-expanded="false">What is the cancellation policy? <span class="icon">+</span></button>
                <div class="faq-answer">
                    <p>We understand plans change. You can cancel up to 24 hours before your scheduled experience for a full refund. Please contact us as soon as possible if you need to reschedule.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question" aria-expanded="false">Are vegetarian/vegan options available? <span class="icon">+</span></button>
                <div class="faq-answer">
                    <p>Yes! Jordanian cuisine is very friendly to vegetarians. For the cooking class and dining experience, please let us know your dietary restrictions in the booking comments, and we will happily accommodate you.</p>
                </div>
            </div>
             <div class="faq-item">
                <button class="faq-question" aria-expanded="false">Do I need to pay in advance? <span class="icon">+</span></button>
                <div class="faq-answer">
                    <p>Payment is usually collected in cash (JOD) on the day of the experience. For large groups, we may request a deposit.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <p><a href="https://share.google/rdDzzUrFBVNFxzx0y" target="_blank" rel="noopener">Review Us on Google</a></p>
        <p>&copy; 2024 Aqaba local experiences. All rights reserved.</p>
    </footer>

    <!-- CSS for the new form structure -->
    <style>
        .experience-option-card {
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        .experience-option-card:hover {
            border-color: var(--color-primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .main-checkbox {
            margin-bottom: 0;
            width: 100%;
        }
        
        .experience-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            overflow: hidden;
            transition: max-height 0.4s ease-out, opacity 0.4s ease-out;
            max-height: 500px; /* arbitrary large max-height */
            opacity: 1;
        }
        
        .experience-details.collapsed {
            max-height: 0;
            opacity: 0;
            margin-top: 0;
            padding-top: 0;
            border-top: none;
            pointer-events: none;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }
        .form-col {
            flex: 1;
        }
        .form-col input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        /* Checkbox styling reuse */
        .checkbox-container {
            display: flex;
            align-items: center;
            position: relative;
            padding-left: 30px;
            cursor: pointer;
            font-size: 1rem;
            user-select: none;
            color: var(--text-primary);
        }
        .checkbox-container input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
        .checkmark {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 20px;
            width: 20px;
            background-color: #fff;
            border-radius: 4px;
            border: 1px solid #aaa;
        }
        .checkbox-container:hover input ~ .checkmark {
            background-color: #f0f0f0;
        }
        .checkbox-container input:checked ~ .checkmark {
            background-color: var(--color-primary);
            border-color: var(--color-primary);
        }
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }
        .checkbox-container input:checked ~ .checkmark:after {
            display: block;
        }
        .checkbox-container .checkmark:after {
            left: 7px;
            top: 3px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        
        @media (max-width: 500px) {
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>

    <script>
    // Mobile menu functionality
    const hamburger = document.getElementById('hamburger' );
    const navbarLinks = document.getElementById('navbarLinks');
    const menuOverlay = document.getElementById('menuOverlay');
    hamburger.addEventListener('click', function() {
        navbarLinks.classList.toggle('open');
        menuOverlay.classList.toggle('active');
    });
    menuOverlay.addEventListener('click', function() {
        navbarLinks.classList.remove('open');
        menuOverlay.classList.remove('active');
    });

    // Mapping short codes to IDs for easier openForm Logic
    const ID_MAP = {
        'cooking': 'details-cooking',
        'Authentic Cooking Class': 'details-cooking',
        'walking': 'details-walking',
        'Walking Tour in Aqaba': 'details-walking',
        'dining': 'details-dining',
        'Dining Experience': 'details-dining',
        'glassboat': 'details-glassboat',
        'Aqaba Glass Boat': 'details-glassboat'
    };

    // Main Function to toggle details visibility
    function toggleDetails(checkbox) {
        const targetId = checkbox.getAttribute('data-target');
        const detailsDiv = document.getElementById(targetId);
        
        if (checkbox.checked) {
            detailsDiv.classList.remove('collapsed');
            // Add required attribute and enable inputs when visible
            detailsDiv.querySelectorAll('input').forEach(input => {
                input.required = true;
                input.disabled = false;
            });
        } else {
            detailsDiv.classList.add('collapsed');
            // Remove required attribute and disable inputs when hidden
            detailsDiv.querySelectorAll('input').forEach(input => {
                input.required = false;
                input.disabled = true;
            });
        }
        calculateTotalPrice();
    }

    // Function to calculate the total price
    function calculateTotalPrice() {
        let total = 0;
        const toggles = document.querySelectorAll('.experience-toggle');
        
        toggles.forEach(toggle => {
            if (toggle.checked) {
                const price = parseFloat(toggle.getAttribute('data-price')) || 0;
                const targetId = toggle.getAttribute('data-target');
                const detailsDiv = document.getElementById(targetId);
                const quantityInput = detailsDiv.querySelector('.guest-input');
                const quantity = parseInt(quantityInput.value) || 0;
                
                total += price * quantity;
            }
        });
      
        // Update visual display
        const displayEl = document.getElementById('price-display');
        if (displayEl) {
            displayEl.textContent = `Total Estimated Price: ${total.toFixed(2)} JD`;
            displayEl.style.display = total > 0 ? 'block' : 'none';
        }
        return total.toFixed(2);
    }

    // Open form from "Book Now" buttons
    function openForm(experienceKey) {
        const form = document.getElementById('reservation-form');
        form.style.display = 'block';
        form.scrollIntoView({ behavior: 'smooth' });

        // Uncheck all first? No, let's keep it additive or just check the new one.
        // Let's just find the checkbox associated with the key and check it.
        const targetId = ID_MAP[experienceKey];
        if (targetId) {
            const toggle = document.querySelector(`.experience-toggle[data-target="${targetId}"]`);
            if (toggle) {
                if (!toggle.checked) {
                    toggle.checked = true;
                    toggleDetails(toggle);
                }
            }
        }
    }

    // Initialize form population on page load
    window.addEventListener('DOMContentLoaded', () => {
        // Handle URL params
        const params = new URLSearchParams(window.location.search);
        const expParam = params.get('experience');
        if (expParam) {
             openForm(expParam);
        }
        
        // Set Min Date for all date inputs
        const today = new Date().toISOString().split('T')[0];
        document.querySelectorAll('.date-input').forEach(input => {
            input.setAttribute('min', today);
        });
        
        // Attach listeners and initialize state
        const toggles = document.querySelectorAll('.experience-toggle');
        toggles.forEach(toggle => {
            // Initialize: if not checked, disable its inputs
            if (!toggle.checked) {
                const targetId = toggle.getAttribute('data-target');
                const detailsDiv = document.getElementById(targetId);
                if (detailsDiv) {
                    detailsDiv.querySelectorAll('input').forEach(input => input.disabled = true);
                }
            }
            
            toggle.addEventListener('change', function() {
                toggleDetails(this);
            });
        });
        
        const inputs = document.querySelectorAll('.guest-input');
        inputs.forEach(input => {
            input.addEventListener('input', calculateTotalPrice);
            input.addEventListener('change', calculateTotalPrice);
        });

        // FAQ Accordion
        document.querySelectorAll('.faq-question').forEach(button => {
            button.addEventListener('click', () => {
                const expanded = button.getAttribute('aria-expanded') === 'true';
                button.setAttribute('aria-expanded', !expanded);
            });
        });
    });

    // Update hidden total price field before submit
    document.getElementById('reservation-form').addEventListener('submit', function(e) {
        const checked = document.querySelectorAll('.experience-toggle:checked');
        if (checked.length === 0) {
            e.preventDefault();
            alert("Please select at least one experience to book.");
            return;
        }
        
        // Disable all inputs in collapsed experience details so they aren't sent to Formspree
        document.querySelectorAll('.experience-details.collapsed').forEach(details => {
            details.querySelectorAll('input').forEach(input => {
                input.disabled = true;
            });
        });

        let totalInput = document.getElementById('total-price');
        if (!totalInput) {
            totalInput = document.createElement('input');
            totalInput.type = 'hidden';
            totalInput.id = 'total-price';
            totalInput.name = 'Total Price'; 
            this.appendChild(totalInput);
        }
        totalInput.value = calculateTotalPrice() + ' JD';
    });

    // Save contact info to localStorage
    const contactFields = ['name', 'email', 'phone'];
    contactFields.forEach(id => {
        const el = document.getElementById(id);
        if(el) {
            const saved = localStorage.getItem(id);
            if(saved) el.value = saved;
            el.addEventListener('input', () => localStorage.setItem(id, el.value));
        }
    });

    // Error Popup Helpers
    function showErrorPopup(message) {
        document.getElementById('popup-message').innerText = message;
        document.getElementById('error-popup').style.display = 'flex';
    }
    function closeErrorPopup() {
        document.getElementById('error-popup').style.display = 'none';
    }
    
    // Navbar scroll effect
    let lastScrollTop = 0;
    const navbar = document.querySelector('.navbar');
    window.addEventListener('scroll', function() {
        let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        navbar.style.top = scrollTop > lastScrollTop ? '-60px' : '0';
        lastScrollTop = scrollTop;
    });
    </script>
<script>
  // toggle dropdown on small screens
  document.querySelectorAll('.navbar .dropbtn').forEach(btn => {
    btn.addEventListener('click', function(e) {
      if (window.innerWidth <= 800) {
        e.preventDefault();
        const dd = this.closest('.dropdown');
        // close other open dropdowns first
        document.querySelectorAll('.navbar .dropdown.open').forEach(o => { if (o !== dd) o.classList.remove('open'); });
        dd.classList.toggle('open');
      }
    });
  });

  // click outside to close mobile dropdown
  document.addEventListener('click', (e) => {
    if (window.innerWidth <= 800) {
      if (!e.target.closest('.navbar')) {
        document.querySelectorAll('.navbar .dropdown.open').forEach(o => o.classList.remove('open'));
      }
    }
  });

  // optional: close on resize from mobile -> desktop
  window.addEventListener('resize', () => {
    if (window.innerWidth > 800) document.querySelectorAll('.navbar .dropdown.open').forEach(o => o.classList.remove('open'));
  });
</script>
</body>
</html>
